{"ast":null,"code":"/**\r\n * Copyright (c) 2017-present, Ephox, Inc.\r\n *\r\n * This source code is licensed under the Apache 2 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { ScriptLoader } from '../ScriptLoader';\nimport { getTinymce } from '../TinyMCE';\nimport { isFunction, isTextareaOrInput, mergePlugins, uuid, configHandlers, isBeforeInputEventAvailable, isInDoc } from '../Utils';\nimport { EditorPropTypes } from './EditorPropTypes';\nvar changeEvents = function () {\n  var _a, _b, _c;\n  return ((_c = (_b = (_a = getTinymce()) === null || _a === void 0 ? void 0 : _a.Env) === null || _b === void 0 ? void 0 : _b.browser) === null || _c === void 0 ? void 0 : _c.isIE()) ? 'change keyup compositionend setcontent' : 'change input compositionend setcontent';\n};\nvar beforeInputEvent = function () {\n  return isBeforeInputEventAvailable() ? 'beforeinput SelectionChange' : 'SelectionChange';\n};\nvar Editor = /** @class */function (_super) {\n  __extends(Editor, _super);\n  function Editor(props) {\n    var _a, _b, _c;\n    var _this = _super.call(this, props) || this;\n    _this.rollbackTimer = undefined;\n    _this.valueCursor = undefined;\n    _this.rollbackChange = function () {\n      var editor = _this.editor;\n      var value = _this.props.value;\n      if (editor && value && value !== _this.currentContent) {\n        editor.undoManager.ignore(function () {\n          editor.setContent(value);\n          // only restore cursor on inline editors when they are focused\n          // as otherwise it will cause a focus grab\n          if (_this.valueCursor && (!_this.inline || editor.hasFocus())) {\n            try {\n              editor.selection.moveToBookmark(_this.valueCursor);\n            } catch (e) {/* ignore */}\n          }\n        });\n      }\n      _this.rollbackTimer = undefined;\n    };\n    _this.handleBeforeInput = function (_evt) {\n      if (_this.props.value !== undefined && _this.props.value === _this.currentContent && _this.editor) {\n        if (!_this.inline || _this.editor.hasFocus) {\n          try {\n            // getBookmark throws exceptions when the editor has not been focused\n            // possibly only in inline mode but I'm not taking chances\n            _this.valueCursor = _this.editor.selection.getBookmark(3);\n          } catch (e) {/* ignore */}\n        }\n      }\n    };\n    _this.handleBeforeInputSpecial = function (evt) {\n      if (evt.key === 'Enter' || evt.key === 'Backspace' || evt.key === 'Delete') {\n        _this.handleBeforeInput(evt);\n      }\n    };\n    _this.handleEditorChange = function (_evt) {\n      var editor = _this.editor;\n      if (editor && editor.initialized) {\n        var newContent = editor.getContent();\n        if (_this.props.value !== undefined && _this.props.value !== newContent) {\n          // start a timer and revert to the value if not applied in time\n          if (!_this.rollbackTimer) {\n            _this.rollbackTimer = window.setTimeout(_this.rollbackChange, 200);\n          }\n        }\n        if (newContent !== _this.currentContent) {\n          _this.currentContent = newContent;\n          if (isFunction(_this.props.onEditorChange)) {\n            var format = _this.props.outputFormat;\n            var out = format === 'html' ? newContent : editor.getContent({\n              format: format\n            });\n            _this.props.onEditorChange(out, editor);\n          }\n        }\n      }\n    };\n    _this.handleEditorChangeSpecial = function (evt) {\n      if (evt.key === 'Backspace' || evt.key === 'Delete') {\n        _this.handleEditorChange(evt);\n      }\n    };\n    _this.initialise = function (attempts) {\n      var _a, _b, _c;\n      if (attempts === void 0) {\n        attempts = 0;\n      }\n      var target = _this.elementRef.current;\n      if (!target) {\n        return; // Editor has been unmounted\n      }\n      if (!isInDoc(target)) {\n        // this is probably someone trying to help by rendering us offscreen\n        // but we can't do that because the editor iframe must be in the document\n        // in order to have state\n        if (attempts === 0) {\n          // we probably just need to wait for the current events to be processed\n          setTimeout(function () {\n            return _this.initialise(1);\n          }, 1);\n        } else if (attempts < 11) {\n          // wait for a second, polling every tenth of a second\n          setTimeout(function () {\n            return _this.initialise(attempts + 1);\n          }, 100);\n        } else {\n          // give up, at this point it seems that more polling is unlikely to help\n          throw new Error('tinymce can only be initialised when in a document');\n        }\n        return;\n      }\n      var tinymce = getTinymce();\n      if (!tinymce) {\n        throw new Error('tinymce should have been loaded into global scope');\n      }\n      var finalInit = __assign(__assign({}, _this.props.init), {\n        selector: undefined,\n        target: target,\n        readonly: _this.props.disabled,\n        inline: _this.inline,\n        plugins: mergePlugins((_a = _this.props.init) === null || _a === void 0 ? void 0 : _a.plugins, _this.props.plugins),\n        toolbar: (_b = _this.props.toolbar) !== null && _b !== void 0 ? _b : (_c = _this.props.init) === null || _c === void 0 ? void 0 : _c.toolbar,\n        setup: function (editor) {\n          _this.editor = editor;\n          _this.bindHandlers({});\n          // When running in inline mode the editor gets the initial value\n          // from the innerHTML of the element it is initialized on.\n          // However we don't want to take on the responsibility of sanitizing\n          // to remove XSS in the react integration so we have a chicken and egg\n          // problem... We avoid it by sneaking in a set content before the first\n          // \"official\" setContent and using TinyMCE to do the sanitization.\n          if (_this.inline && !isTextareaOrInput(target)) {\n            editor.once('PostRender', function (_evt) {\n              editor.setContent(_this.getInitialValue(), {\n                no_events: true\n              });\n            });\n          }\n          if (_this.props.init && isFunction(_this.props.init.setup)) {\n            _this.props.init.setup(editor);\n          }\n        },\n        init_instance_callback: function (editor) {\n          var _a, _b;\n          // check for changes that happened since tinymce.init() was called\n          var initialValue = _this.getInitialValue();\n          _this.currentContent = (_a = _this.currentContent) !== null && _a !== void 0 ? _a : editor.getContent();\n          if (_this.currentContent !== initialValue) {\n            _this.currentContent = initialValue;\n            // same as resetContent in TinyMCE 5\n            editor.setContent(initialValue);\n            editor.undoManager.clear();\n            editor.undoManager.add();\n            editor.setDirty(false);\n          }\n          var disabled = (_b = _this.props.disabled) !== null && _b !== void 0 ? _b : false;\n          editor.setMode(disabled ? 'readonly' : 'design');\n          // ensure existing init_instance_callback is called\n          if (_this.props.init && isFunction(_this.props.init.init_instance_callback)) {\n            _this.props.init.init_instance_callback(editor);\n          }\n        }\n      });\n      if (!_this.inline) {\n        target.style.visibility = '';\n      }\n      if (isTextareaOrInput(target)) {\n        target.value = _this.getInitialValue();\n      }\n      tinymce.init(finalInit);\n    };\n    _this.id = _this.props.id || uuid('tiny-react');\n    _this.elementRef = React.createRef();\n    _this.inline = (_c = (_a = _this.props.inline) !== null && _a !== void 0 ? _a : (_b = _this.props.init) === null || _b === void 0 ? void 0 : _b.inline) !== null && _c !== void 0 ? _c : false;\n    _this.boundHandlers = {};\n    return _this;\n  }\n  Editor.prototype.componentDidUpdate = function (prevProps) {\n    var _this = this;\n    var _a, _b;\n    if (this.rollbackTimer) {\n      clearTimeout(this.rollbackTimer);\n      this.rollbackTimer = undefined;\n    }\n    if (this.editor) {\n      this.bindHandlers(prevProps);\n      if (this.editor.initialized) {\n        this.currentContent = (_a = this.currentContent) !== null && _a !== void 0 ? _a : this.editor.getContent();\n        if (typeof this.props.initialValue === 'string' && this.props.initialValue !== prevProps.initialValue) {\n          // same as resetContent in TinyMCE 5\n          this.editor.setContent(this.props.initialValue);\n          this.editor.undoManager.clear();\n          this.editor.undoManager.add();\n          this.editor.setDirty(false);\n        } else if (typeof this.props.value === 'string' && this.props.value !== this.currentContent) {\n          var localEditor_1 = this.editor;\n          localEditor_1.undoManager.transact(function () {\n            // inline editors grab focus when restoring selection\n            // so we don't try to keep their selection unless they are currently focused\n            var cursor;\n            if (!_this.inline || localEditor_1.hasFocus()) {\n              try {\n                // getBookmark throws exceptions when the editor has not been focused\n                // possibly only in inline mode but I'm not taking chances\n                cursor = localEditor_1.selection.getBookmark(3);\n              } catch (e) {/* ignore */}\n            }\n            var valueCursor = _this.valueCursor;\n            localEditor_1.setContent(_this.props.value);\n            if (!_this.inline || localEditor_1.hasFocus()) {\n              for (var _i = 0, _a = [cursor, valueCursor]; _i < _a.length; _i++) {\n                var bookmark = _a[_i];\n                if (bookmark) {\n                  try {\n                    localEditor_1.selection.moveToBookmark(bookmark);\n                    _this.valueCursor = bookmark;\n                    break;\n                  } catch (e) {/* ignore */}\n                }\n              }\n            }\n          });\n        }\n        if (this.props.disabled !== prevProps.disabled) {\n          var disabled = (_b = this.props.disabled) !== null && _b !== void 0 ? _b : false;\n          this.editor.setMode(disabled ? 'readonly' : 'design');\n        }\n      }\n    }\n  };\n  Editor.prototype.componentDidMount = function () {\n    var _a, _b, _c, _d, _e, _f;\n    if (getTinymce() !== null) {\n      this.initialise();\n    } else if (this.elementRef.current && this.elementRef.current.ownerDocument) {\n      ScriptLoader.load(this.elementRef.current.ownerDocument, this.getScriptSrc(), (_b = (_a = this.props.scriptLoading) === null || _a === void 0 ? void 0 : _a.async) !== null && _b !== void 0 ? _b : false, (_d = (_c = this.props.scriptLoading) === null || _c === void 0 ? void 0 : _c.defer) !== null && _d !== void 0 ? _d : false, (_f = (_e = this.props.scriptLoading) === null || _e === void 0 ? void 0 : _e.delay) !== null && _f !== void 0 ? _f : 0, this.initialise);\n    }\n  };\n  Editor.prototype.componentWillUnmount = function () {\n    var _this = this;\n    var editor = this.editor;\n    if (editor) {\n      editor.off(changeEvents(), this.handleEditorChange);\n      editor.off(beforeInputEvent(), this.handleBeforeInput);\n      editor.off('keypress', this.handleEditorChangeSpecial);\n      editor.off('keydown', this.handleBeforeInputSpecial);\n      editor.off('NewBlock', this.handleEditorChange);\n      Object.keys(this.boundHandlers).forEach(function (eventName) {\n        editor.off(eventName, _this.boundHandlers[eventName]);\n      });\n      this.boundHandlers = {};\n      editor.remove();\n      this.editor = undefined;\n    }\n  };\n  Editor.prototype.render = function () {\n    return this.inline ? this.renderInline() : this.renderIframe();\n  };\n  Editor.prototype.renderInline = function () {\n    var _a = this.props.tagName,\n      tagName = _a === void 0 ? 'div' : _a;\n    return React.createElement(tagName, {\n      ref: this.elementRef,\n      id: this.id\n    });\n  };\n  Editor.prototype.renderIframe = function () {\n    return React.createElement('textarea', {\n      ref: this.elementRef,\n      style: {\n        visibility: 'hidden'\n      },\n      name: this.props.textareaName,\n      id: this.id\n    });\n  };\n  Editor.prototype.getScriptSrc = function () {\n    if (typeof this.props.tinymceScriptSrc === 'string') {\n      return this.props.tinymceScriptSrc;\n    } else {\n      var channel = this.props.cloudChannel;\n      var apiKey = this.props.apiKey ? this.props.apiKey : 'no-api-key';\n      return \"https://cdn.tiny.cloud/1/\" + apiKey + \"/tinymce/\" + channel + \"/tinymce.min.js\";\n    }\n  };\n  Editor.prototype.getInitialValue = function () {\n    if (typeof this.props.initialValue === 'string') {\n      return this.props.initialValue;\n    } else if (typeof this.props.value === 'string') {\n      return this.props.value;\n    } else {\n      return '';\n    }\n  };\n  Editor.prototype.bindHandlers = function (prevProps) {\n    var _this = this;\n    if (this.editor !== undefined) {\n      // typescript chokes trying to understand the type of the lookup function\n      configHandlers(this.editor, prevProps, this.props, this.boundHandlers, function (key) {\n        return _this.props[key];\n      });\n      // check if we should monitor editor changes\n      var isValueControlled = function (p) {\n        return p.onEditorChange !== undefined || p.value !== undefined;\n      };\n      var wasControlled = isValueControlled(prevProps);\n      var nowControlled = isValueControlled(this.props);\n      if (!wasControlled && nowControlled) {\n        this.editor.on(changeEvents(), this.handleEditorChange);\n        this.editor.on(beforeInputEvent(), this.handleBeforeInput);\n        this.editor.on('keydown', this.handleBeforeInputSpecial);\n        this.editor.on('keyup', this.handleEditorChangeSpecial);\n        this.editor.on('NewBlock', this.handleEditorChange);\n      } else if (wasControlled && !nowControlled) {\n        this.editor.off(changeEvents(), this.handleEditorChange);\n        this.editor.off(beforeInputEvent(), this.handleBeforeInput);\n        this.editor.off('keydown', this.handleBeforeInputSpecial);\n        this.editor.off('keyup', this.handleEditorChangeSpecial);\n        this.editor.off('NewBlock', this.handleEditorChange);\n      }\n    }\n  };\n  Editor.propTypes = EditorPropTypes;\n  Editor.defaultProps = {\n    cloudChannel: '5'\n  };\n  return Editor;\n}(React.Component);\nexport { Editor };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","React","ScriptLoader","getTinymce","isFunction","isTextareaOrInput","mergePlugins","uuid","configHandlers","isBeforeInputEventAvailable","isInDoc","EditorPropTypes","changeEvents","_a","_b","_c","Env","browser","isIE","beforeInputEvent","Editor","_super","props","_this","rollbackTimer","undefined","valueCursor","rollbackChange","editor","value","currentContent","undoManager","ignore","setContent","inline","hasFocus","selection","moveToBookmark","e","handleBeforeInput","_evt","getBookmark","handleBeforeInputSpecial","evt","key","handleEditorChange","initialized","newContent","getContent","window","setTimeout","onEditorChange","format","outputFormat","out","handleEditorChangeSpecial","initialise","attempts","target","elementRef","current","Error","tinymce","finalInit","init","selector","readonly","disabled","plugins","toolbar","setup","bindHandlers","once","getInitialValue","no_events","init_instance_callback","initialValue","clear","add","setDirty","setMode","style","visibility","id","createRef","boundHandlers","componentDidUpdate","prevProps","clearTimeout","localEditor_1","transact","cursor","_i","bookmark","componentDidMount","_d","_e","_f","ownerDocument","load","getScriptSrc","scriptLoading","async","defer","delay","componentWillUnmount","off","keys","forEach","eventName","remove","render","renderInline","renderIframe","tagName","createElement","ref","name","textareaName","tinymceScriptSrc","channel","cloudChannel","apiKey","isValueControlled","wasControlled","nowControlled","on","propTypes","defaultProps","Component"],"sources":["D:/STUDY/PTIT/NAM_4/KI_1/LT_WEB/BTL_GiuaKy/cellphons/client-cellphones/node_modules/@tinymce/tinymce-react/lib/es2015/main/ts/components/Editor.js"],"sourcesContent":["/**\r\n * Copyright (c) 2017-present, Ephox, Inc.\r\n *\r\n * This source code is licensed under the Apache 2 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport * as React from 'react';\r\nimport { ScriptLoader } from '../ScriptLoader';\r\nimport { getTinymce } from '../TinyMCE';\r\nimport { isFunction, isTextareaOrInput, mergePlugins, uuid, configHandlers, isBeforeInputEventAvailable, isInDoc } from '../Utils';\r\nimport { EditorPropTypes } from './EditorPropTypes';\r\nvar changeEvents = function () { var _a, _b, _c; return ((_c = (_b = (_a = getTinymce()) === null || _a === void 0 ? void 0 : _a.Env) === null || _b === void 0 ? void 0 : _b.browser) === null || _c === void 0 ? void 0 : _c.isIE()) ? 'change keyup compositionend setcontent' : 'change input compositionend setcontent'; };\r\nvar beforeInputEvent = function () { return isBeforeInputEventAvailable() ? 'beforeinput SelectionChange' : 'SelectionChange'; };\r\nvar Editor = /** @class */ (function (_super) {\r\n    __extends(Editor, _super);\r\n    function Editor(props) {\r\n        var _a, _b, _c;\r\n        var _this = _super.call(this, props) || this;\r\n        _this.rollbackTimer = undefined;\r\n        _this.valueCursor = undefined;\r\n        _this.rollbackChange = function () {\r\n            var editor = _this.editor;\r\n            var value = _this.props.value;\r\n            if (editor && value && value !== _this.currentContent) {\r\n                editor.undoManager.ignore(function () {\r\n                    editor.setContent(value);\r\n                    // only restore cursor on inline editors when they are focused\r\n                    // as otherwise it will cause a focus grab\r\n                    if (_this.valueCursor && (!_this.inline || editor.hasFocus())) {\r\n                        try {\r\n                            editor.selection.moveToBookmark(_this.valueCursor);\r\n                        }\r\n                        catch (e) { /* ignore */ }\r\n                    }\r\n                });\r\n            }\r\n            _this.rollbackTimer = undefined;\r\n        };\r\n        _this.handleBeforeInput = function (_evt) {\r\n            if (_this.props.value !== undefined && _this.props.value === _this.currentContent && _this.editor) {\r\n                if (!_this.inline || _this.editor.hasFocus) {\r\n                    try {\r\n                        // getBookmark throws exceptions when the editor has not been focused\r\n                        // possibly only in inline mode but I'm not taking chances\r\n                        _this.valueCursor = _this.editor.selection.getBookmark(3);\r\n                    }\r\n                    catch (e) { /* ignore */ }\r\n                }\r\n            }\r\n        };\r\n        _this.handleBeforeInputSpecial = function (evt) {\r\n            if (evt.key === 'Enter' || evt.key === 'Backspace' || evt.key === 'Delete') {\r\n                _this.handleBeforeInput(evt);\r\n            }\r\n        };\r\n        _this.handleEditorChange = function (_evt) {\r\n            var editor = _this.editor;\r\n            if (editor && editor.initialized) {\r\n                var newContent = editor.getContent();\r\n                if (_this.props.value !== undefined && _this.props.value !== newContent) {\r\n                    // start a timer and revert to the value if not applied in time\r\n                    if (!_this.rollbackTimer) {\r\n                        _this.rollbackTimer = window.setTimeout(_this.rollbackChange, 200);\r\n                    }\r\n                }\r\n                if (newContent !== _this.currentContent) {\r\n                    _this.currentContent = newContent;\r\n                    if (isFunction(_this.props.onEditorChange)) {\r\n                        var format = _this.props.outputFormat;\r\n                        var out = format === 'html' ? newContent : editor.getContent({ format: format });\r\n                        _this.props.onEditorChange(out, editor);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        _this.handleEditorChangeSpecial = function (evt) {\r\n            if (evt.key === 'Backspace' || evt.key === 'Delete') {\r\n                _this.handleEditorChange(evt);\r\n            }\r\n        };\r\n        _this.initialise = function (attempts) {\r\n            var _a, _b, _c;\r\n            if (attempts === void 0) { attempts = 0; }\r\n            var target = _this.elementRef.current;\r\n            if (!target) {\r\n                return; // Editor has been unmounted\r\n            }\r\n            if (!isInDoc(target)) {\r\n                // this is probably someone trying to help by rendering us offscreen\r\n                // but we can't do that because the editor iframe must be in the document\r\n                // in order to have state\r\n                if (attempts === 0) {\r\n                    // we probably just need to wait for the current events to be processed\r\n                    setTimeout(function () { return _this.initialise(1); }, 1);\r\n                }\r\n                else if (attempts < 11) {\r\n                    // wait for a second, polling every tenth of a second\r\n                    setTimeout(function () { return _this.initialise(attempts + 1); }, 100);\r\n                }\r\n                else {\r\n                    // give up, at this point it seems that more polling is unlikely to help\r\n                    throw new Error('tinymce can only be initialised when in a document');\r\n                }\r\n                return;\r\n            }\r\n            var tinymce = getTinymce();\r\n            if (!tinymce) {\r\n                throw new Error('tinymce should have been loaded into global scope');\r\n            }\r\n            var finalInit = __assign(__assign({}, _this.props.init), { selector: undefined, target: target, readonly: _this.props.disabled, inline: _this.inline, plugins: mergePlugins((_a = _this.props.init) === null || _a === void 0 ? void 0 : _a.plugins, _this.props.plugins), toolbar: (_b = _this.props.toolbar) !== null && _b !== void 0 ? _b : (_c = _this.props.init) === null || _c === void 0 ? void 0 : _c.toolbar, setup: function (editor) {\r\n                    _this.editor = editor;\r\n                    _this.bindHandlers({});\r\n                    // When running in inline mode the editor gets the initial value\r\n                    // from the innerHTML of the element it is initialized on.\r\n                    // However we don't want to take on the responsibility of sanitizing\r\n                    // to remove XSS in the react integration so we have a chicken and egg\r\n                    // problem... We avoid it by sneaking in a set content before the first\r\n                    // \"official\" setContent and using TinyMCE to do the sanitization.\r\n                    if (_this.inline && !isTextareaOrInput(target)) {\r\n                        editor.once('PostRender', function (_evt) {\r\n                            editor.setContent(_this.getInitialValue(), { no_events: true });\r\n                        });\r\n                    }\r\n                    if (_this.props.init && isFunction(_this.props.init.setup)) {\r\n                        _this.props.init.setup(editor);\r\n                    }\r\n                }, init_instance_callback: function (editor) {\r\n                    var _a, _b;\r\n                    // check for changes that happened since tinymce.init() was called\r\n                    var initialValue = _this.getInitialValue();\r\n                    _this.currentContent = (_a = _this.currentContent) !== null && _a !== void 0 ? _a : editor.getContent();\r\n                    if (_this.currentContent !== initialValue) {\r\n                        _this.currentContent = initialValue;\r\n                        // same as resetContent in TinyMCE 5\r\n                        editor.setContent(initialValue);\r\n                        editor.undoManager.clear();\r\n                        editor.undoManager.add();\r\n                        editor.setDirty(false);\r\n                    }\r\n                    var disabled = (_b = _this.props.disabled) !== null && _b !== void 0 ? _b : false;\r\n                    editor.setMode(disabled ? 'readonly' : 'design');\r\n                    // ensure existing init_instance_callback is called\r\n                    if (_this.props.init && isFunction(_this.props.init.init_instance_callback)) {\r\n                        _this.props.init.init_instance_callback(editor);\r\n                    }\r\n                } });\r\n            if (!_this.inline) {\r\n                target.style.visibility = '';\r\n            }\r\n            if (isTextareaOrInput(target)) {\r\n                target.value = _this.getInitialValue();\r\n            }\r\n            tinymce.init(finalInit);\r\n        };\r\n        _this.id = _this.props.id || uuid('tiny-react');\r\n        _this.elementRef = React.createRef();\r\n        _this.inline = (_c = (_a = _this.props.inline) !== null && _a !== void 0 ? _a : (_b = _this.props.init) === null || _b === void 0 ? void 0 : _b.inline) !== null && _c !== void 0 ? _c : false;\r\n        _this.boundHandlers = {};\r\n        return _this;\r\n    }\r\n    Editor.prototype.componentDidUpdate = function (prevProps) {\r\n        var _this = this;\r\n        var _a, _b;\r\n        if (this.rollbackTimer) {\r\n            clearTimeout(this.rollbackTimer);\r\n            this.rollbackTimer = undefined;\r\n        }\r\n        if (this.editor) {\r\n            this.bindHandlers(prevProps);\r\n            if (this.editor.initialized) {\r\n                this.currentContent = (_a = this.currentContent) !== null && _a !== void 0 ? _a : this.editor.getContent();\r\n                if (typeof this.props.initialValue === 'string' && this.props.initialValue !== prevProps.initialValue) {\r\n                    // same as resetContent in TinyMCE 5\r\n                    this.editor.setContent(this.props.initialValue);\r\n                    this.editor.undoManager.clear();\r\n                    this.editor.undoManager.add();\r\n                    this.editor.setDirty(false);\r\n                }\r\n                else if (typeof this.props.value === 'string' && this.props.value !== this.currentContent) {\r\n                    var localEditor_1 = this.editor;\r\n                    localEditor_1.undoManager.transact(function () {\r\n                        // inline editors grab focus when restoring selection\r\n                        // so we don't try to keep their selection unless they are currently focused\r\n                        var cursor;\r\n                        if (!_this.inline || localEditor_1.hasFocus()) {\r\n                            try {\r\n                                // getBookmark throws exceptions when the editor has not been focused\r\n                                // possibly only in inline mode but I'm not taking chances\r\n                                cursor = localEditor_1.selection.getBookmark(3);\r\n                            }\r\n                            catch (e) { /* ignore */ }\r\n                        }\r\n                        var valueCursor = _this.valueCursor;\r\n                        localEditor_1.setContent(_this.props.value);\r\n                        if (!_this.inline || localEditor_1.hasFocus()) {\r\n                            for (var _i = 0, _a = [cursor, valueCursor]; _i < _a.length; _i++) {\r\n                                var bookmark = _a[_i];\r\n                                if (bookmark) {\r\n                                    try {\r\n                                        localEditor_1.selection.moveToBookmark(bookmark);\r\n                                        _this.valueCursor = bookmark;\r\n                                        break;\r\n                                    }\r\n                                    catch (e) { /* ignore */ }\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                if (this.props.disabled !== prevProps.disabled) {\r\n                    var disabled = (_b = this.props.disabled) !== null && _b !== void 0 ? _b : false;\r\n                    this.editor.setMode(disabled ? 'readonly' : 'design');\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Editor.prototype.componentDidMount = function () {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        if (getTinymce() !== null) {\r\n            this.initialise();\r\n        }\r\n        else if (this.elementRef.current && this.elementRef.current.ownerDocument) {\r\n            ScriptLoader.load(this.elementRef.current.ownerDocument, this.getScriptSrc(), (_b = (_a = this.props.scriptLoading) === null || _a === void 0 ? void 0 : _a.async) !== null && _b !== void 0 ? _b : false, (_d = (_c = this.props.scriptLoading) === null || _c === void 0 ? void 0 : _c.defer) !== null && _d !== void 0 ? _d : false, (_f = (_e = this.props.scriptLoading) === null || _e === void 0 ? void 0 : _e.delay) !== null && _f !== void 0 ? _f : 0, this.initialise);\r\n        }\r\n    };\r\n    Editor.prototype.componentWillUnmount = function () {\r\n        var _this = this;\r\n        var editor = this.editor;\r\n        if (editor) {\r\n            editor.off(changeEvents(), this.handleEditorChange);\r\n            editor.off(beforeInputEvent(), this.handleBeforeInput);\r\n            editor.off('keypress', this.handleEditorChangeSpecial);\r\n            editor.off('keydown', this.handleBeforeInputSpecial);\r\n            editor.off('NewBlock', this.handleEditorChange);\r\n            Object.keys(this.boundHandlers).forEach(function (eventName) {\r\n                editor.off(eventName, _this.boundHandlers[eventName]);\r\n            });\r\n            this.boundHandlers = {};\r\n            editor.remove();\r\n            this.editor = undefined;\r\n        }\r\n    };\r\n    Editor.prototype.render = function () {\r\n        return this.inline ? this.renderInline() : this.renderIframe();\r\n    };\r\n    Editor.prototype.renderInline = function () {\r\n        var _a = this.props.tagName, tagName = _a === void 0 ? 'div' : _a;\r\n        return React.createElement(tagName, {\r\n            ref: this.elementRef,\r\n            id: this.id\r\n        });\r\n    };\r\n    Editor.prototype.renderIframe = function () {\r\n        return React.createElement('textarea', {\r\n            ref: this.elementRef,\r\n            style: { visibility: 'hidden' },\r\n            name: this.props.textareaName,\r\n            id: this.id\r\n        });\r\n    };\r\n    Editor.prototype.getScriptSrc = function () {\r\n        if (typeof this.props.tinymceScriptSrc === 'string') {\r\n            return this.props.tinymceScriptSrc;\r\n        }\r\n        else {\r\n            var channel = this.props.cloudChannel;\r\n            var apiKey = this.props.apiKey ? this.props.apiKey : 'no-api-key';\r\n            return \"https://cdn.tiny.cloud/1/\" + apiKey + \"/tinymce/\" + channel + \"/tinymce.min.js\";\r\n        }\r\n    };\r\n    Editor.prototype.getInitialValue = function () {\r\n        if (typeof this.props.initialValue === 'string') {\r\n            return this.props.initialValue;\r\n        }\r\n        else if (typeof this.props.value === 'string') {\r\n            return this.props.value;\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    };\r\n    Editor.prototype.bindHandlers = function (prevProps) {\r\n        var _this = this;\r\n        if (this.editor !== undefined) {\r\n            // typescript chokes trying to understand the type of the lookup function\r\n            configHandlers(this.editor, prevProps, this.props, this.boundHandlers, function (key) { return _this.props[key]; });\r\n            // check if we should monitor editor changes\r\n            var isValueControlled = function (p) { return p.onEditorChange !== undefined || p.value !== undefined; };\r\n            var wasControlled = isValueControlled(prevProps);\r\n            var nowControlled = isValueControlled(this.props);\r\n            if (!wasControlled && nowControlled) {\r\n                this.editor.on(changeEvents(), this.handleEditorChange);\r\n                this.editor.on(beforeInputEvent(), this.handleBeforeInput);\r\n                this.editor.on('keydown', this.handleBeforeInputSpecial);\r\n                this.editor.on('keyup', this.handleEditorChangeSpecial);\r\n                this.editor.on('NewBlock', this.handleEditorChange);\r\n            }\r\n            else if (wasControlled && !nowControlled) {\r\n                this.editor.off(changeEvents(), this.handleEditorChange);\r\n                this.editor.off(beforeInputEvent(), this.handleBeforeInput);\r\n                this.editor.off('keydown', this.handleBeforeInputSpecial);\r\n                this.editor.off('keyup', this.handleEditorChangeSpecial);\r\n                this.editor.off('NewBlock', this.handleEditorChange);\r\n            }\r\n        }\r\n    };\r\n    Editor.propTypes = EditorPropTypes;\r\n    Editor.defaultProps = {\r\n        cloudChannel: '5'\r\n    };\r\n    return Editor;\r\n}(React.Component));\r\nexport { Editor };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}